{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/disco_lu/Documents/GitHub/our-links/app/lib/supabase-client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Missing Supabase environment variables')\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    persistSession: true,\n    autoRefreshToken: true,\n    detectSessionInUrl: true\n  }\n})\n\n// Initialize the session\nlet currentSession: any = null\n\nexport async function getSession() {\n  try {\n    const { data: { session } } = await supabase.auth.getSession()\n    currentSession = session\n    return session\n  } catch (error) {\n    console.error('Error getting session:', error)\n    return null\n  }\n}\n\n// Set up auth state change listener\nsupabase.auth.onAuthStateChange((_event, session) => {\n  currentSession = session\n})\n\nexport function getCurrentSession() {\n  return currentSession\n} "],"names":[],"mappings":";;;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN,uCAAsC;;AAEtC;AAEO,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF;AAEA,yBAAyB;AACzB,IAAI,iBAAsB;AAEnB,eAAe;IACpB,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;QAC5D,iBAAiB;QACjB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;IACT;AACF;AAEA,oCAAoC;AACpC,SAAS,IAAI,CAAC,iBAAiB,CAAC,CAAC,QAAQ;IACvC,iBAAiB;AACnB;AAEO,SAAS;IACd,OAAO;AACT","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/disco_lu/Documents/GitHub/our-links/app/context/auth.tsx"],"sourcesContent":["'use client'\n\nimport { createContext, useContext, useEffect, useState } from 'react'\nimport { supabase } from '../lib/supabase-client'\nimport { User, Session } from '@supabase/supabase-js'\n\ntype AuthContextType = {\n  user: User | null\n  session: Session | null\n  loading: boolean\n  signOut: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  session: null,\n  loading: true,\n  signOut: async () => {},\n})\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [session, setSession] = useState<Session | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    let mounted = true\n    console.log('AuthProvider: Initializing...')\n    \n    // Get initial session\n    const initializeAuth = async () => {\n      try {\n        console.log('AuthProvider: Getting initial session...')\n        const { data: { session: initialSession } } = await supabase.auth.getSession()\n        console.log('AuthProvider: Initial session:', initialSession)\n        \n        if (mounted) {\n          if (initialSession) {\n            setSession(initialSession)\n            setUser(initialSession.user)\n          }\n          setLoading(false)\n        }\n      } catch (error) {\n        console.error('AuthProvider: Error getting initial session:', error)\n        if (mounted) {\n          setLoading(false)\n        }\n      }\n    }\n\n    // Set up auth state change listener\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange(async (_event, session) => {\n      console.log('AuthProvider: Auth state changed:', _event, session)\n      \n      if (mounted) {\n        if (session) {\n          setSession(session)\n          setUser(session.user)\n        } else {\n          setSession(null)\n          setUser(null)\n        }\n        setLoading(false)\n      }\n    })\n\n    // Initialize auth\n    initializeAuth()\n\n    return () => {\n      console.log('AuthProvider: Cleaning up...')\n      mounted = false\n      subscription.unsubscribe()\n    }\n  }, [])\n\n  const signOut = async () => {\n    try {\n      console.log('AuthProvider: Signing out...')\n      const { error } = await supabase.auth.signOut()\n      if (error) throw error\n      setUser(null)\n      setSession(null)\n    } catch (error) {\n      console.error('AuthProvider: Error signing out:', error)\n      throw error\n    }\n  }\n\n  const value = {\n    user,\n    session,\n    loading,\n    signOut,\n  }\n\n  console.log('AuthProvider: Current state:', { user, session, loading })\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider')\n  }\n  return context\n} "],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAaA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAmB;IACjD,MAAM;IACN,SAAS;IACT,SAAS;IACT,SAAS,WAAa;AACxB;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU;QACd,QAAQ,GAAG,CAAC;QAEZ,sBAAsB;QACtB,MAAM,iBAAiB;YACrB,IAAI;gBACF,QAAQ,GAAG,CAAC;gBACZ,MAAM,EAAE,MAAM,EAAE,SAAS,cAAc,EAAE,EAAE,GAAG,MAAM,gIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,UAAU;gBAC5E,QAAQ,GAAG,CAAC,kCAAkC;gBAE9C,IAAI,SAAS;oBACX,IAAI,gBAAgB;wBAClB,WAAW;wBACX,QAAQ,eAAe,IAAI;oBAC7B;oBACA,WAAW;gBACb;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gDAAgD;gBAC9D,IAAI,SAAS;oBACX,WAAW;gBACb;YACF;QACF;QAEA,oCAAoC;QACpC,MAAM,EACJ,MAAM,EAAE,YAAY,EAAE,EACvB,GAAG,gIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,QAAQ;YACjD,QAAQ,GAAG,CAAC,qCAAqC,QAAQ;YAEzD,IAAI,SAAS;gBACX,IAAI,SAAS;oBACX,WAAW;oBACX,QAAQ,QAAQ,IAAI;gBACtB,OAAO;oBACL,WAAW;oBACX,QAAQ;gBACV;gBACA,WAAW;YACb;QACF;QAEA,kBAAkB;QAClB;QAEA,OAAO;YACL,QAAQ,GAAG,CAAC;YACZ,UAAU;YACV,aAAa,WAAW;QAC1B;IACF,GAAG,EAAE;IAEL,MAAM,UAAU;QACd,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,gIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,OAAO;YAC7C,IAAI,OAAO,MAAM;YACjB,QAAQ;YACR,WAAW;QACb,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;YAClD,MAAM;QACR;IACF;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;IACF;IAEA,QAAQ,GAAG,CAAC,gCAAgC;QAAE;QAAM;QAAS;IAAQ;IAErE,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}}]
}