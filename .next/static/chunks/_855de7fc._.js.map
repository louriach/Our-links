{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/disco_lu/link-share-pwa/app/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nif (!process.env.NEXT_PUBLIC_SUPABASE_URL) {\n  throw new Error('Missing env.NEXT_PUBLIC_SUPABASE_URL')\n}\nif (!process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) {\n  throw new Error('Missing env.NEXT_PUBLIC_SUPABASE_ANON_KEY')\n}\n\nconsole.log('Initializing Supabase client with URL:', process.env.NEXT_PUBLIC_SUPABASE_URL)\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  {\n    auth: {\n      persistSession: true,\n      autoRefreshToken: true,\n      detectSessionInUrl: true\n    }\n  }\n) "],"names":[],"mappings":";;;AAEK;AAFL;;AAEA,uCAA2C;;AAE3C;AACA,uCAAgD;;AAEhD;AAEA,QAAQ,GAAG,CAAC;AAEL,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,sUAGjC;IACE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,oBAAoB;IACtB;AACF","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Users/disco_lu/link-share-pwa/app/components/Dashboard.tsx"],"sourcesContent":["'use client'\n\nimport { User } from '@supabase/supabase-js'\nimport { useState, useEffect } from 'react'\nimport { useAuth } from '../context/auth'\nimport { supabase } from '../lib/supabase'\nimport toast from 'react-hot-toast'\n\ninterface DashboardProps {\n  user: User\n}\n\ninterface Link {\n  id: string\n  url: string\n  title: string\n  description: string\n  note: string\n  created_by: string\n  created_at: string\n  updated_at: string\n}\n\nexport default function Dashboard({ user }: DashboardProps) {\n  const [url, setUrl] = useState('')\n  const [note, setNote] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [links, setLinks] = useState<Link[]>([])\n  const { signOut } = useAuth()\n\n  useEffect(() => {\n    fetchLinks()\n  }, [])\n\n  const fetchLinks = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('links')\n        .select('*')\n        .eq('created_by', user.id)\n        .order('created_at', { ascending: false })\n\n      if (error) throw error\n\n      setLinks(data || [])\n    } catch (error) {\n      console.error('Error fetching links:', error)\n      toast.error('Failed to load links')\n    }\n  }\n\n  const formatUrl = (url: string) => {\n    // If URL doesn't start with http:// or https://, add https://\n    if (!url.match(/^https?:\\/\\//i)) {\n      return `https://${url}`\n    }\n    return url\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n\n    try {\n      const formattedUrl = formatUrl(url)\n      \n      // First, try to fetch metadata for the URL\n      const response = await fetch('/api/unfurl', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ url: formattedUrl }),\n      })\n\n      const metadata = await response.json()\n      \n      if (!response.ok) {\n        // If metadata fetch fails, still create the link with basic info\n        console.warn('Failed to fetch metadata:', metadata.error)\n        const { data, error } = await supabase\n          .from('links')\n          .insert({\n            created_by: user.id,\n            url: formattedUrl,\n            title: new URL(formattedUrl).hostname,\n            description: '',\n            note: note.trim(),\n          })\n          .select()\n          .single()\n\n        if (error) throw error\n\n        toast.success('Link shared successfully!')\n        setUrl('')\n        setNote('')\n        fetchLinks()\n        return\n      }\n\n      // Create the link with metadata\n      const { data, error } = await supabase\n        .from('links')\n        .insert({\n          created_by: user.id,\n          url: formattedUrl,\n          title: metadata.title || new URL(formattedUrl).hostname,\n          description: metadata.description || '',\n          note: note.trim(),\n        })\n        .select()\n        .single()\n\n      if (error) throw error\n\n      toast.success('Link shared successfully!')\n      setUrl('')\n      setNote('')\n      fetchLinks()\n    } catch (error) {\n      console.error('Error sharing link:', error)\n      toast.error('Failed to share link')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h1 className=\"text-2xl font-bold\">Welcome, {user.email}</h1>\n        <button\n          onClick={() => signOut()}\n          className=\"px-4 py-2 text-sm text-gray-600 hover:text-gray-800\"\n        >\n          Sign Out\n        </button>\n      </div>\n\n      <div className=\"max-w-2xl mx-auto\">\n        <form onSubmit={handleSubmit} className=\"mb-8 space-y-4\">\n          <div>\n            <input\n              type=\"text\"\n              value={url}\n              onChange={(e) => setUrl(e.target.value)}\n              placeholder=\"Enter a URL to share (e.g., example.com)\"\n              className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\n              required\n            />\n          </div>\n          <div>\n            <textarea\n              value={note}\n              onChange={(e) => setNote(e.target.value.slice(0, 140))}\n              placeholder=\"Add a note (optional, max 140 characters)\"\n              className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\n              rows={3}\n              maxLength={140}\n            />\n            <div className=\"text-sm text-gray-500 text-right mt-1\">\n              {note.length}/140 characters\n            </div>\n          </div>\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50\"\n            >\n              {loading ? 'Sharing...' : 'Share Link'}\n            </button>\n          </div>\n        </form>\n\n        <div className=\"space-y-4\">\n          <h2 className=\"text-xl font-semibold\">Your Shared Links</h2>\n          {links.map((link) => (\n            <div\n              key={link.id}\n              className=\"bg-white p-4 rounded-lg shadow hover:shadow-md transition-shadow\"\n            >\n              <a\n                href={link.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-indigo-600 hover:text-indigo-800 font-medium\"\n              >\n                {link.title}\n              </a>\n              {link.note && (\n                <p className=\"text-gray-600 mt-2\">{link.note}</p>\n              )}\n              {link.description && (\n                <p className=\"text-gray-500 text-sm mt-2\">\n                  {link.description}\n                </p>\n              )}\n              <div className=\"text-gray-400 text-sm mt-2\">\n                {new Date(link.created_at).toLocaleDateString()}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"sources":["file:///Users/disco_lu/link-share-pwa/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useAuth } from './context/auth'\nimport Dashboard from './components/Dashboard'\n\nexport default function Home() {\n  const { user, session, loading } = useAuth()\n  const router = useRouter()\n  const [isRedirecting, setIsRedirecting] = useState(false)\n\n  console.log('Home: Current state:', { user, session, loading, isRedirecting })\n\n  useEffect(() => {\n    console.log('Home: Effect running with state:', { user, session, loading })\n    \n    if (!loading && !session && !isRedirecting) {\n      console.log('Home: No session, redirecting to login')\n      setIsRedirecting(true)\n      router.push('/auth/login')\n    }\n  }, [session, loading, router, isRedirecting])\n\n  // Show loading spinner during initial load or redirect\n  if (loading || isRedirecting) {\n    console.log('Home: Showing loading spinner')\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600\"></div>\n      </div>\n    )\n  }\n\n  // Show dashboard if we have a session\n  if (session) {\n    console.log('Home: Rendering Dashboard')\n    return <Dashboard user={user!} />\n  }\n\n  // Show nothing if no session (should be handled by redirect)\n  console.log('Home: No session and not redirecting, showing nothing')\n  return null\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,0HAAA,CAAA,UAAO,AAAD;IACzC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnD,QAAQ,GAAG,CAAC,wBAAwB;QAAE;QAAM;QAAS;QAAS;IAAc;IAE5E,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0BAAE;YACR,QAAQ,GAAG,CAAC,oCAAoC;gBAAE;gBAAM;gBAAS;YAAQ;YAEzE,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,eAAe;gBAC1C,QAAQ,GAAG,CAAC;gBACZ,iBAAiB;gBACjB,OAAO,IAAI,CAAC;YACd;QACF;yBAAG;QAAC;QAAS;QAAS;QAAQ;KAAc;IAE5C,uDAAuD;IACvD,IAAI,WAAW,eAAe;QAC5B,QAAQ,GAAG,CAAC;QACZ,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,sCAAsC;IACtC,IAAI,SAAS;QACX,QAAQ,GAAG,CAAC;QACZ,qBAAO,6LAAC,kIAAA,CAAA,UAAS;YAAC,MAAM;;;;;;IAC1B;IAEA,6DAA6D;IAC7D,QAAQ,GAAG,CAAC;IACZ,OAAO;AACT;GApCwB;;QACa,0HAAA,CAAA,UAAO;QAC3B,qIAAA,CAAA,YAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Users/disco_lu/link-share-pwa/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}